{"code":"export class GlobalEventBus {\n    handlers = new Map();\n    on(event, listener, index = -1) {\n        if (!this.handlers.has(event)) {\n            this.handlers.set(event, []);\n        }\n        const handlers = this.handlers.get(event);\n        if (index < 0 || index >= handlers.length) {\n            handlers.push(listener);\n        }\n        else {\n            handlers.splice(index, 0, listener);\n        }\n        window.addEventListener(event, this.dispatchHandler);\n    }\n    off(event, listener) {\n        if (this.handlers.has(event)) {\n            this.handlers.set(event, this.handlers.get(event).filter(h => h !== listener));\n            if (this.handlers.get(event).length === 0) {\n                window.removeEventListener(event, this.dispatchHandler);\n            }\n        }\n    }\n    emit(event, data) {\n        window.dispatchEvent(new CustomEvent(event, { detail: { data, stopPropagation: false } }));\n    }\n    dispatchHandler = (e) => {\n        if (!(e instanceof CustomEvent))\n            return;\n        const eventName = e.type;\n        if (!this.handlers.has(eventName))\n            return;\n        for (const handler of this.handlers.get(eventName)) {\n            if (e.detail.stopPropagation)\n                break;\n            if (handler(e.detail.data) === false) {\n                e.detail.stopPropagation = true;\n            }\n        }\n    };\n}\n//# sourceMappingURL=GlobalEventsBus.js.map","references":["/Users/alaaeldeen.hamed/Desktop/Frontend/alevent/src/EventBus.ts"],"map":"{\"version\":3,\"file\":\"GlobalEventsBus.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/GlobalEventsBus.ts\"],\"names\":[],\"mappings\":\"AAEA,MAAM,OAAO,cAAc;IACjB,QAAQ,GAAoD,IAAI,GAAG,EAAE,CAAC;IAE9E,EAAE,CAAC,KAAa,EAAE,QAAqC,EAAE,QAAgB,CAAC,CAAC;QACzE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC;YAC9B,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QAC/B,CAAC;QAED,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAE,CAAC;QAC3C,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC;YAC1C,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC1B,CAAC;aAAM,CAAC;YACN,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;QACtC,CAAC;QAED,MAAM,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,eAAgC,CAAC,CAAC;IACxE,CAAC;IAED,GAAG,CAAC,KAAa,EAAE,QAAqC;QACtD,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC;YAC7B,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC;YAChF,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAE,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBAC3C,MAAM,CAAC,mBAAmB,CAAC,KAAK,EAAE,IAAI,CAAC,eAAgC,CAAC,CAAC;YAC3E,CAAC;QACH,CAAC;IACH,CAAC;IAED,IAAI,CAAC,KAAa,EAAE,IAAO;QACzB,MAAM,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,eAAe,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;IAC7F,CAAC;IAEO,eAAe,GAAG,CAAI,CAAQ,EAAQ,EAAE;QAC9C,IAAI,CAAC,CAAC,CAAC,YAAY,WAAW,CAAC;YAAE,OAAO;QAExC,MAAM,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC;QACzB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC;YAAE,OAAO;QAE1C,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAE,EAAE,CAAC;YACpD,IAAI,CAAC,CAAC,MAAM,CAAC,eAAe;gBAAE,MAAM;YAEpC,IAAI,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,EAAE,CAAC;gBACrC,CAAC,CAAC,MAAM,CAAC,eAAe,GAAG,IAAI,CAAC;YAClC,CAAC;QACH,CAAC;IACH,CAAC,CAAC;CACH\"}","dts":{"name":"/Users/alaaeldeen.hamed/Desktop/Frontend/alevent/dist/GlobalEventsBus.d.ts","writeByteOrderMark":false,"text":"import { EventBus } from './EventBus';\nexport declare class GlobalEventBus<T> implements EventBus<T> {\n    private handlers;\n    on(event: string, listener: (data: T) => boolean | void, index?: number): void;\n    off(event: string, listener: (data: T) => boolean | void): void;\n    emit(event: string, data: T): void;\n    private dispatchHandler;\n}\n"}}
